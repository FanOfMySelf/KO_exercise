<!DOCTYPE html>
<html>
 

<table id="myTable" cellspacing="1">
  <thead><tr><th>Firstname</th><th>Lastname</th><th>Age</th></tr></thead>
  <tbody>         
      <tr data-bind="foreach: people , click: select  " > 
       <td data-bind="foreach: list ">
        <div  data-bind=" text: $data "><span><a href="#" data-bind="click: $root.remove_person">Remove</a></span>  </div> 
     </td>
     
      </tr>        
  </tbody>
</table>

<div>
  <h1>Person info: </h1>
  <p>FirstName: <span><input type="text" name="f_OR_l_a" data-bind="value: selected().f_OR_l_a" /></span> </p> 
  <p>LastName:  <span><input type="text" name="Lname" data-bind="value:'asd' " />    </span> </p>
  <p>Age: <span><input type="text" name="Age" data-bind="text: selected() " /></span> </p> 


</div>

<p id="demo"></p> 
  

<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>     
<script type="text/javascript" src="knockout.min.js"></script>  

<script>

function ApppViewModel() {

    var self = this;
    this.name = "Alton Goodwin Myra Booker Malikah Monaco Mayan Rieder Anna Wike Yael Vanvalkenburg Mackenzee George Marlina Rollins Zyasia Correa Allison Durbin Danya Conwell Bryona Solomon Lizbeth Pool Kiara Freda Paulette Cruse Starr Jacobson Arianna Cason Klee Childs Zuleika Pope Kymberley Maurer Devine Bond Ashleigh West Baylea Kersey Safiyah Land Paula Reed Lia Spears Barrington Jacinto Gillian Mcintyre Halli Mckay Maximillian Kellett Terriona Baltz Alannah Brew Brieanna Saul Zoe Forbes Mylie Cherry Yanissa Southard Eleana Belcher Marely Harrison Karlee Tidwell Ella Hoskins Lauran Palmer Tiffanie Law Kobie Ashcraft Leilanni Walsh Allisson Jelinek Milana Conaway Saddie Farmer Nahla Blair Khamyah Flood Ermina Robinette"; 
    this.tach = this.name.split(' '); //mảng sau khi tách các chữ trên name
    this.firstName = ko.observableArray();
    this.lastName = ko.observableArray();
    this.age = ko.observableArray();
    //this.tendaydu = ko.observableArray();
    //this.namestartsatM = ko.observableArray();
     
		//for (var j = 0, i =0;j<this.tach.length-1;j++)
    //{
    //  
    //    this.tendaydu()[i] = this.tach[j] + ' ' + this.tach[j+1];
    //    j++;
    //    i++;
    //   
    //}



    //Add các tên sau khi split vào mảng firstName và lastName
    var f = 0
    var l = 0
    for ( var i = 0;i<this.tach.length;i++)
      {
      	if (this.temp == 0)
        	{
          	//if(this.tach[i].search("M")==0 )
            //{
          	this.firstName()[f] = this.tach[i];
            this.temp = 1;
            f++ ;
            //}
          }
         else 
         	{
          	this.lastName()[l] = this.tach[i];
            this.temp = 0;
            l++;
          }
      }


      //random tuổi vào mảng age với điều kiện nếu length của fullname < 12 thì age sẽ bằng -1
    for (var i =0;i<this.firstName().length;i++)
    {
      if ( (this.firstName()[i].length + this.lastName()[i].length) <12 )
        {
          this.age()[i] = -1;
        }
      else 
        {
          this.age()[i] = Math.floor(Math.random() * 100) + 1;
        }  
    }  

   // for (var j = 0;j<this.firstName().length;j++)
   // {      
   //   this.namestartsatM()[j] = this.firstName()[j] + ' ' + this.lastName()[j];     
   //    
   // }

    //function truyền value vào list
    var fullName = function(list)
    {
      //this.f_OR_l_a = ko.observable(f_OR_l_a);
      this.list = ko.observableArray(list);
    }

    //truyền value vào list people
    this.people = [new fullName(this.firstName()) , new fullName( this.lastName()),new fullName(this.age()) ];

    //copy list people rồi truyền vào list items
    this.items = ko.observableArray(this.people.map(function (i) {
        return new fullName(i.list());
    }));



    this.select = function(item) {
        this.selected(item);      
    };


    this.selected = ko.observable(this.items()[0]);
    
    this.remove_person = function (person)
    {
      this.people.remove(person);
    }

   //console.log(this.selected().f_OR_l_a());
   //console.log(this.people[1]);
   //console.log(this.people[2]);
   // console.log(this.people[2].list );
    

}

// Activates knockout.js
ko.applyBindings(new ApppViewModel());

</script>
</body> 

</html>
